import { expect, fixture, html } from '@open-wc/testing';

import '../wc-src/index';

describe('vf-voice', () => {
  it('defaults to stem up if no attribute', async() => {
    const el = await fixture(html`
      <vf-score>
        <vf-stave clef='treble' keySig='C'>
          <vf-voice>C4/q[id='1'], D4[id='2'], E4[id='3'], F4[id='4']</vf-voice>
        </vf-stave>
      </vf-score>
    `);

    const expected = '<div id="vf-score"><slot></slot><svg width="500" height="200" viewBox="0 0 500 200" style="width: 500px; height: 200px;"><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 80L410 80"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 90L410 90"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 100L410 100"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 110L410 110"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 120L410 120"></path><rect stroke-width="0.3" fill="black" stroke="black" stroke-dasharray="none" x="10" y="79.5" width="1" height="41"></rect><rect stroke-width="0.3" fill="black" stroke="black" stroke-dasharray="none" x="410" y="79.5" width="1" height="41"></rect><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M15 111M28.280256 120.199872C29.116608 120.199872,30.079680000000003 120.12384,30.814656 119.971776C31.194816000000003 119.89574400000001,31.270848 119.8704,31.346880000000002 120.301248C31.777728 122.759616,32.335296 125.927616,32.335296 127.651008C32.335296 133.04928,28.685760000000002 133.708224,26.53152 133.708224C24.554688 133.708224,23.61696 133.125312,23.61696 132.643776C23.61696 132.390336,23.946432 132.28896,24.782784 132.010176C25.923264000000003 131.680704,27.215808000000003 130.717632,27.215808000000003 128.588736C27.215808000000003 126.58656,25.948608 124.863168,23.718336 124.863168C21.285312 124.863168,19.81536 126.814656,19.81536 129.070272C19.81536 131.427264,21.234624 135.026112,26.759616 135.026112C29.19264 135.026112,33.931968 133.910976,33.931968 127.72704C33.931968 125.62348800000001,33.27302400000001 122.176704,32.892864 119.89574400000001C32.816832000000005 119.464896,32.842176 119.515584,33.349056000000004 119.287488C37.04928 117.817536,39.482304 114.725568,39.482304 110.594496C39.482304 105.9312,36.060864 101.800128,30.687936 101.800128C29.750208 101.800128,29.750208 101.800128,29.623488000000002 101.141184L28.711104 95.844288C28.660416 95.41344,28.711104 95.388096,28.9392 95.16C32.892864 91.48512,35.883456 86.847168,35.883456 81.246144C35.883456 78.078144,34.996415999999996 74.93548799999999,33.50112 72.75590399999999C32.943552 71.944896,32.005824000000004 70.931136,31.60032 70.931136C31.09344 70.931136,29.95296 71.868864,29.243328 72.67987199999999C26.53152 75.670464,25.64448 80.232384,25.64448 84.033984C25.64448 86.137536,25.923264000000003 88.51987199999999,26.176704 90.015168C26.252736 90.446016,26.278080000000003 90.522048,25.847231999999998 90.902208C20.57568 95.236032,15 100.456896,15 107.832C15 114.168,19.333824 120.199872,28.280256 120.199872M17.91456 110.265024C17.91456 108.110784,18.29472 105.221568,21.310656 101.800128C23.515584 99.367104,25.188288 97.998528,26.886336 96.629952C27.266496 96.325824,27.342528 96.37651199999999,27.41856 96.756672L28.17888 101.445312C28.280256 102.1296,28.280256 102.10425599999999,27.621312000000003 102.307008C24.427968 103.3968,22.324416 106.286016,22.324416 109.403328C22.324416 112.672704,24.047808 115.004352,26.53152 115.866048C26.835648 115.967424,27.266496 116.0688,27.519936 116.0688C27.798720000000003 116.0688,27.950784 115.891392,27.950784 115.663296C27.950784 115.409856,27.672 115.30848,27.41856 115.207104C25.872576000000002 114.54816,24.782784 112.976832,24.782784 111.304128C24.782784 109.200576,26.202048 107.654592,28.43232 107.020992C29.015232 106.868928,29.091264000000002 106.919616,29.167296 107.32512L30.992064 118.19769600000001C31.068096 118.6032,31.017408 118.6032,30.485184000000004 118.704576C29.902272000000004 118.805952,29.167296 118.881984,28.43232 118.881984C22.045632 118.881984,17.91456 115.33382399999999,17.91456 110.265024M32.157888 76.582848C33.349056000000004 76.582848,34.337472000000005 77.571264,34.337472000000005 79.57344C34.337472000000005 83.62848,30.865344 86.9232,28.001472 89.432256C27.748032000000002 89.660352,27.595968 89.609664,27.519936 89.128128C27.367872 88.1904,27.29184 86.948544,27.29184 85.78272C27.29184 80.08032,29.927616 76.582848,32.157888 76.582848M31.09344 106.742208C34.058688000000004 106.995648,36.49171200000001 109.47936,36.49171200000001 112.672704C36.49171200000001 114.979008,35.097792 116.82912,33.070272 117.868224C32.639424000000005 118.070976,32.563392 118.070976,32.48736 117.640128L30.687936 107.249088C30.611904000000003 106.792896,30.662592000000004 106.69152,31.09344 106.742208"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 80L410 80"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 90L410 90"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 100L410 100"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 110L410 110"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 120L410 120"></path><rect stroke-width="0.3" fill="black" stroke="black" stroke-dasharray="none" x="10" y="79.5" width="1" height="41"></rect><rect stroke-width="0.3" fill="black" stroke="black" stroke-dasharray="none" x="410" y="79.5" width="1" height="41"></rect><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M15 111M28.280256 120.199872C29.116608 120.199872,30.079680000000003 120.12384,30.814656 119.971776C31.194816000000003 119.89574400000001,31.270848 119.8704,31.346880000000002 120.301248C31.777728 122.759616,32.335296 125.927616,32.335296 127.651008C32.335296 133.04928,28.685760000000002 133.708224,26.53152 133.708224C24.554688 133.708224,23.61696 133.125312,23.61696 132.643776C23.61696 132.390336,23.946432 132.28896,24.782784 132.010176C25.923264000000003 131.680704,27.215808000000003 130.717632,27.215808000000003 128.588736C27.215808000000003 126.58656,25.948608 124.863168,23.718336 124.863168C21.285312 124.863168,19.81536 126.814656,19.81536 129.070272C19.81536 131.427264,21.234624 135.026112,26.759616 135.026112C29.19264 135.026112,33.931968 133.910976,33.931968 127.72704C33.931968 125.62348800000001,33.27302400000001 122.176704,32.892864 119.89574400000001C32.816832000000005 119.464896,32.842176 119.515584,33.349056000000004 119.287488C37.04928 117.817536,39.482304 114.725568,39.482304 110.594496C39.482304 105.9312,36.060864 101.800128,30.687936 101.800128C29.750208 101.800128,29.750208 101.800128,29.623488000000002 101.141184L28.711104 95.844288C28.660416 95.41344,28.711104 95.388096,28.9392 95.16C32.892864 91.48512,35.883456 86.847168,35.883456 81.246144C35.883456 78.078144,34.996415999999996 74.93548799999999,33.50112 72.75590399999999C32.943552 71.944896,32.005824000000004 70.931136,31.60032 70.931136C31.09344 70.931136,29.95296 71.868864,29.243328 72.67987199999999C26.53152 75.670464,25.64448 80.232384,25.64448 84.033984C25.64448 86.137536,25.923264000000003 88.51987199999999,26.176704 90.015168C26.252736 90.446016,26.278080000000003 90.522048,25.847231999999998 90.902208C20.57568 95.236032,15 100.456896,15 107.832C15 114.168,19.333824 120.199872,28.280256 120.199872M17.91456 110.265024C17.91456 108.110784,18.29472 105.221568,21.310656 101.800128C23.515584 99.367104,25.188288 97.998528,26.886336 96.629952C27.266496 96.325824,27.342528 96.37651199999999,27.41856 96.756672L28.17888 101.445312C28.280256 102.1296,28.280256 102.10425599999999,27.621312000000003 102.307008C24.427968 103.3968,22.324416 106.286016,22.324416 109.403328C22.324416 112.672704,24.047808 115.004352,26.53152 115.866048C26.835648 115.967424,27.266496 116.0688,27.519936 116.0688C27.798720000000003 116.0688,27.950784 115.891392,27.950784 115.663296C27.950784 115.409856,27.672 115.30848,27.41856 115.207104C25.872576000000002 114.54816,24.782784 112.976832,24.782784 111.304128C24.782784 109.200576,26.202048 107.654592,28.43232 107.020992C29.015232 106.868928,29.091264000000002 106.919616,29.167296 107.32512L30.992064 118.19769600000001C31.068096 118.6032,31.017408 118.6032,30.485184000000004 118.704576C29.902272000000004 118.805952,29.167296 118.881984,28.43232 118.881984C22.045632 118.881984,17.91456 115.33382399999999,17.91456 110.265024M32.157888 76.582848C33.349056000000004 76.582848,34.337472000000005 77.571264,34.337472000000005 79.57344C34.337472000000005 83.62848,30.865344 86.9232,28.001472 89.432256C27.748032000000002 89.660352,27.595968 89.609664,27.519936 89.128128C27.367872 88.1904,27.29184 86.948544,27.29184 85.78272C27.29184 80.08032,29.927616 76.582848,32.157888 76.582848M31.09344 106.742208C34.058688000000004 106.995648,36.49171200000001 109.47936,36.49171200000001 112.672704C36.49171200000001 114.979008,35.097792 116.82912,33.070272 117.868224C32.639424000000005 118.070976,32.563392 118.070976,32.48736 117.640128L30.687936 107.249088C30.611904000000003 106.792896,30.662592000000004 106.69152,31.09344 106.742208"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M50 130L67.934 130"></path><g class="vf-stavenote" id="vf-1"><g class="vf-note" pointer-events="bounding-box"><g class="vf-stem" pointer-events="bounding-box"><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M64.184 130L64.184 95"></path></g><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M53 130M53 131.6848C53 133.7908,54.74096 135.0544,56.9312 135.0544C60.52544 135.0544,64.934 131.74096,64.934 128.3152C64.934 126.23728,63.30536 124.9456,61.0028 124.9456C56.566159999999996 124.9456,53 128.23096,53 131.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-2"><g class="vf-note" pointer-events="bounding-box"><g class="vf-stem" pointer-events="bounding-box"><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M150.9505 125L150.9505 90"></path></g><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M139.7665 125M139.7665 126.6848C139.7665 128.7908,141.50746 130.0544,143.6977 130.0544C147.29194 130.0544,151.7005 126.74096,151.7005 123.3152C151.7005 121.23728,150.07186000000002 119.9456,147.76930000000002 119.9456C143.33266 119.9456,139.7665 123.23096,139.7665 126.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-3"><g class="vf-note" pointer-events="bounding-box"><g class="vf-stem" pointer-events="bounding-box"><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M237.71699999999996 120L237.71699999999996 85"></path></g><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M226.53299999999996 120M226.53299999999996 121.6848C226.53299999999996 123.7908,228.27395999999996 125.0544,230.46419999999995 125.0544C234.05843999999996 125.0544,238.46699999999996 121.74096,238.46699999999996 118.3152C238.46699999999996 116.23728,236.83835999999997 114.9456,234.53579999999997 114.9456C230.09915999999996 114.9456,226.53299999999996 118.23096,226.53299999999996 121.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-4"><g class="vf-note" pointer-events="bounding-box"><g class="vf-stem" pointer-events="bounding-box"><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M324.4835 115L324.4835 80"></path></g><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M313.29949999999997 115M313.29949999999997 116.6848C313.29949999999997 118.7908,315.04045999999994 120.0544,317.23069999999996 120.0544C320.82493999999997 120.0544,325.2335 116.74096,325.2335 113.3152C325.2335 111.23728,323.60486 109.9456,321.30229999999995 109.9456C316.86566 109.9456,313.29949999999997 113.23096,313.29949999999997 116.6848"></path></g></g><g class="vf-modifiers"></g></g></svg></div>';
    const actualTrimmed = el.shadowRoot.innerHTML.replace(/\s/g, '');
    const expectedTrimmed = expected.replace(/\s/g, '');
    expect(actualTrimmed).to.equal(expectedTrimmed);
  });

  it('stem attribute set renders correctly', async() =>  {
    const el = await fixture(html`
      <vf-score>
        <vf-stave clef='treble' keySig='C'>
          <vf-voice stem='down'>C5/q[id='1'], D5[id='2'], E5[id='3'], F5[id='4']</vf-voice>
        </vf-stave>
      </vf-score>
    `); 

    const expected = '<div id="vf-score"><slot></slot><svg width="500" height="200" viewBox="0 0 500 200" style="width: 500px; height: 200px;"><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 80L410 80"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 90L410 90"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 100L410 100"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 110L410 110"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 120L410 120"></path><rect stroke-width="0.3" fill="black" stroke="black" stroke-dasharray="none" x="10" y="79.5" width="1" height="41"></rect><rect stroke-width="0.3" fill="black" stroke="black" stroke-dasharray="none" x="410" y="79.5" width="1" height="41"></rect><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M15 111M28.280256 120.199872C29.116608 120.199872,30.079680000000003 120.12384,30.814656 119.971776C31.194816000000003 119.89574400000001,31.270848 119.8704,31.346880000000002 120.301248C31.777728 122.759616,32.335296 125.927616,32.335296 127.651008C32.335296 133.04928,28.685760000000002 133.708224,26.53152 133.708224C24.554688 133.708224,23.61696 133.125312,23.61696 132.643776C23.61696 132.390336,23.946432 132.28896,24.782784 132.010176C25.923264000000003 131.680704,27.215808000000003 130.717632,27.215808000000003 128.588736C27.215808000000003 126.58656,25.948608 124.863168,23.718336 124.863168C21.285312 124.863168,19.81536 126.814656,19.81536 129.070272C19.81536 131.427264,21.234624 135.026112,26.759616 135.026112C29.19264 135.026112,33.931968 133.910976,33.931968 127.72704C33.931968 125.62348800000001,33.27302400000001 122.176704,32.892864 119.89574400000001C32.816832000000005 119.464896,32.842176 119.515584,33.349056000000004 119.287488C37.04928 117.817536,39.482304 114.725568,39.482304 110.594496C39.482304 105.9312,36.060864 101.800128,30.687936 101.800128C29.750208 101.800128,29.750208 101.800128,29.623488000000002 101.141184L28.711104 95.844288C28.660416 95.41344,28.711104 95.388096,28.9392 95.16C32.892864 91.48512,35.883456 86.847168,35.883456 81.246144C35.883456 78.078144,34.996415999999996 74.93548799999999,33.50112 72.75590399999999C32.943552 71.944896,32.005824000000004 70.931136,31.60032 70.931136C31.09344 70.931136,29.95296 71.868864,29.243328 72.67987199999999C26.53152 75.670464,25.64448 80.232384,25.64448 84.033984C25.64448 86.137536,25.923264000000003 88.51987199999999,26.176704 90.015168C26.252736 90.446016,26.278080000000003 90.522048,25.847231999999998 90.902208C20.57568 95.236032,15 100.456896,15 107.832C15 114.168,19.333824 120.199872,28.280256 120.199872M17.91456 110.265024C17.91456 108.110784,18.29472 105.221568,21.310656 101.800128C23.515584 99.367104,25.188288 97.998528,26.886336 96.629952C27.266496 96.325824,27.342528 96.37651199999999,27.41856 96.756672L28.17888 101.445312C28.280256 102.1296,28.280256 102.10425599999999,27.621312000000003 102.307008C24.427968 103.3968,22.324416 106.286016,22.324416 109.403328C22.324416 112.672704,24.047808 115.004352,26.53152 115.866048C26.835648 115.967424,27.266496 116.0688,27.519936 116.0688C27.798720000000003 116.0688,27.950784 115.891392,27.950784 115.663296C27.950784 115.409856,27.672 115.30848,27.41856 115.207104C25.872576000000002 114.54816,24.782784 112.976832,24.782784 111.304128C24.782784 109.200576,26.202048 107.654592,28.43232 107.020992C29.015232 106.868928,29.091264000000002 106.919616,29.167296 107.32512L30.992064 118.19769600000001C31.068096 118.6032,31.017408 118.6032,30.485184000000004 118.704576C29.902272000000004 118.805952,29.167296 118.881984,28.43232 118.881984C22.045632 118.881984,17.91456 115.33382399999999,17.91456 110.265024M32.157888 76.582848C33.349056000000004 76.582848,34.337472000000005 77.571264,34.337472000000005 79.57344C34.337472000000005 83.62848,30.865344 86.9232,28.001472 89.432256C27.748032000000002 89.660352,27.595968 89.609664,27.519936 89.128128C27.367872 88.1904,27.29184 86.948544,27.29184 85.78272C27.29184 80.08032,29.927616 76.582848,32.157888 76.582848M31.09344 106.742208C34.058688000000004 106.995648,36.49171200000001 109.47936,36.49171200000001 112.672704C36.49171200000001 114.979008,35.097792 116.82912,33.070272 117.868224C32.639424000000005 118.070976,32.563392 118.070976,32.48736 117.640128L30.687936 107.249088C30.611904000000003 106.792896,30.662592000000004 106.69152,31.09344 106.742208"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 80L410 80"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 90L410 90"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 100L410 100"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 110L410 110"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 120L410 120"></path><rect stroke-width="0.3" fill="black" stroke="black" stroke-dasharray="none" x="10" y="79.5" width="1" height="41"></rect><rect stroke-width="0.3" fill="black" stroke="black" stroke-dasharray="none" x="410" y="79.5" width="1" height="41"></rect><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M15 111M28.280256 120.199872C29.116608 120.199872,30.079680000000003 120.12384,30.814656 119.971776C31.194816000000003 119.89574400000001,31.270848 119.8704,31.346880000000002 120.301248C31.777728 122.759616,32.335296 125.927616,32.335296 127.651008C32.335296 133.04928,28.685760000000002 133.708224,26.53152 133.708224C24.554688 133.708224,23.61696 133.125312,23.61696 132.643776C23.61696 132.390336,23.946432 132.28896,24.782784 132.010176C25.923264000000003 131.680704,27.215808000000003 130.717632,27.215808000000003 128.588736C27.215808000000003 126.58656,25.948608 124.863168,23.718336 124.863168C21.285312 124.863168,19.81536 126.814656,19.81536 129.070272C19.81536 131.427264,21.234624 135.026112,26.759616 135.026112C29.19264 135.026112,33.931968 133.910976,33.931968 127.72704C33.931968 125.62348800000001,33.27302400000001 122.176704,32.892864 119.89574400000001C32.816832000000005 119.464896,32.842176 119.515584,33.349056000000004 119.287488C37.04928 117.817536,39.482304 114.725568,39.482304 110.594496C39.482304 105.9312,36.060864 101.800128,30.687936 101.800128C29.750208 101.800128,29.750208 101.800128,29.623488000000002 101.141184L28.711104 95.844288C28.660416 95.41344,28.711104 95.388096,28.9392 95.16C32.892864 91.48512,35.883456 86.847168,35.883456 81.246144C35.883456 78.078144,34.996415999999996 74.93548799999999,33.50112 72.75590399999999C32.943552 71.944896,32.005824000000004 70.931136,31.60032 70.931136C31.09344 70.931136,29.95296 71.868864,29.243328 72.67987199999999C26.53152 75.670464,25.64448 80.232384,25.64448 84.033984C25.64448 86.137536,25.923264000000003 88.51987199999999,26.176704 90.015168C26.252736 90.446016,26.278080000000003 90.522048,25.847231999999998 90.902208C20.57568 95.236032,15 100.456896,15 107.832C15 114.168,19.333824 120.199872,28.280256 120.199872M17.91456 110.265024C17.91456 108.110784,18.29472 105.221568,21.310656 101.800128C23.515584 99.367104,25.188288 97.998528,26.886336 96.629952C27.266496 96.325824,27.342528 96.37651199999999,27.41856 96.756672L28.17888 101.445312C28.280256 102.1296,28.280256 102.10425599999999,27.621312000000003 102.307008C24.427968 103.3968,22.324416 106.286016,22.324416 109.403328C22.324416 112.672704,24.047808 115.004352,26.53152 115.866048C26.835648 115.967424,27.266496 116.0688,27.519936 116.0688C27.798720000000003 116.0688,27.950784 115.891392,27.950784 115.663296C27.950784 115.409856,27.672 115.30848,27.41856 115.207104C25.872576000000002 114.54816,24.782784 112.976832,24.782784 111.304128C24.782784 109.200576,26.202048 107.654592,28.43232 107.020992C29.015232 106.868928,29.091264000000002 106.919616,29.167296 107.32512L30.992064 118.19769600000001C31.068096 118.6032,31.017408 118.6032,30.485184000000004 118.704576C29.902272000000004 118.805952,29.167296 118.881984,28.43232 118.881984C22.045632 118.881984,17.91456 115.33382399999999,17.91456 110.265024M32.157888 76.582848C33.349056000000004 76.582848,34.337472000000005 77.571264,34.337472000000005 79.57344C34.337472000000005 83.62848,30.865344 86.9232,28.001472 89.432256C27.748032000000002 89.660352,27.595968 89.609664,27.519936 89.128128C27.367872 88.1904,27.29184 86.948544,27.29184 85.78272C27.29184 80.08032,29.927616 76.582848,32.157888 76.582848M31.09344 106.742208C34.058688000000004 106.995648,36.49171200000001 109.47936,36.49171200000001 112.672704C36.49171200000001 114.979008,35.097792 116.82912,33.070272 117.868224C32.639424000000005 118.070976,32.563392 118.070976,32.48736 117.640128L30.687936 107.249088C30.611904000000003 106.792896,30.662592000000004 106.69152,31.09344 106.742208"></path><g class="vf-stavenote" id="vf-1"><g class="vf-note" pointer-events="bounding-box"><g class="vf-stem" pointer-events="bounding-box"><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M53.75 97L53.75 130"></path></g><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M53 95M53 96.6848C53 98.7908,54.74096 100.0544,56.9312 100.0544C60.52544 100.0544,64.934 96.74096,64.934 93.3152C64.934 91.23728,63.30536 89.9456,61.0028 89.9456C56.566159999999996 89.9456,53 93.23096,53 96.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-2"><g class="vf-note" pointer-events="bounding-box"><g class="vf-stem" pointer-events="bounding-box"><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M140.5165 92L140.5165 125"></path></g><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M139.7665 90M139.7665 91.6848C139.7665 93.7908,141.50746 95.0544,143.6977 95.0544C147.29194 95.0544,151.7005 91.74096,151.7005 88.3152C151.7005 86.23728,150.07186000000002 84.9456,147.76930000000002 84.9456C143.33266 84.9456,139.7665 88.23096,139.7665 91.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-3"><g class="vf-note" pointer-events="bounding-box"><g class="vf-stem" pointer-events="bounding-box"><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M227.28299999999996 87L227.28299999999996 120"></path></g><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M226.53299999999996 85M226.53299999999996 86.6848C226.53299999999996 88.7908,228.27395999999996 90.0544,230.46419999999995 90.0544C234.05843999999996 90.0544,238.46699999999996 86.74096,238.46699999999996 83.3152C238.46699999999996 81.23728,236.83835999999997 79.9456,234.53579999999997 79.9456C230.09915999999996 79.9456,226.53299999999996 83.23096,226.53299999999996 86.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-4"><g class="vf-note" pointer-events="bounding-box"><g class="vf-stem" pointer-events="bounding-box"><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M314.04949999999997 82L314.04949999999997 115"></path></g><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M313.29949999999997 80M313.29949999999997 81.6848C313.29949999999997 83.7908,315.04045999999994 85.0544,317.23069999999996 85.0544C320.82493999999997 85.0544,325.2335 81.74096,325.2335 78.3152C325.2335 76.23728,323.60486 74.9456,321.30229999999995 74.9456C316.86566 74.9456,313.29949999999997 78.23096,313.29949999999997 81.6848"></path></g></g><g class="vf-modifiers"></g></g></svg></div>';
    const actualTrimmed = el.shadowRoot.innerHTML.replace(/\s/g, '');
    const expectedTrimmed = expected.replace(/\s/g, '');

    expect(actualTrimmed).to.equal(expectedTrimmed);
  });

  it('stem attribute on note overrides stem attribute on voice', async() => {
    const el = await fixture(html`
      <vf-score>
        <vf-stave clef='treble' keySig='C'>
          <vf-voice>F4/q[id='1'], A4[id='2'], C5[id='3', stem='down'], E5[id='4', stem='down']</vf-voice>
        </vf-stave>
      </vf-score>
    `);

    const expected = '<div id="vf-score"><slot></slot><svg width="500" height="200" viewBox="0 0 500 200" style="width: 500px; height: 200px;"><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 80L410 80"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 90L410 90"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 100L410 100"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 110L410 110"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 120L410 120"></path><rect stroke-width="0.3" fill="black" stroke="black" stroke-dasharray="none" x="10" y="79.5" width="1" height="41"></rect><rect stroke-width="0.3" fill="black" stroke="black" stroke-dasharray="none" x="410" y="79.5" width="1" height="41"></rect><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M15 111M28.280256 120.199872C29.116608 120.199872,30.079680000000003 120.12384,30.814656 119.971776C31.194816000000003 119.89574400000001,31.270848 119.8704,31.346880000000002 120.301248C31.777728 122.759616,32.335296 125.927616,32.335296 127.651008C32.335296 133.04928,28.685760000000002 133.708224,26.53152 133.708224C24.554688 133.708224,23.61696 133.125312,23.61696 132.643776C23.61696 132.390336,23.946432 132.28896,24.782784 132.010176C25.923264000000003 131.680704,27.215808000000003 130.717632,27.215808000000003 128.588736C27.215808000000003 126.58656,25.948608 124.863168,23.718336 124.863168C21.285312 124.863168,19.81536 126.814656,19.81536 129.070272C19.81536 131.427264,21.234624 135.026112,26.759616 135.026112C29.19264 135.026112,33.931968 133.910976,33.931968 127.72704C33.931968 125.62348800000001,33.27302400000001 122.176704,32.892864 119.89574400000001C32.816832000000005 119.464896,32.842176 119.515584,33.349056000000004 119.287488C37.04928 117.817536,39.482304 114.725568,39.482304 110.594496C39.482304 105.9312,36.060864 101.800128,30.687936 101.800128C29.750208 101.800128,29.750208 101.800128,29.623488000000002 101.141184L28.711104 95.844288C28.660416 95.41344,28.711104 95.388096,28.9392 95.16C32.892864 91.48512,35.883456 86.847168,35.883456 81.246144C35.883456 78.078144,34.996415999999996 74.93548799999999,33.50112 72.75590399999999C32.943552 71.944896,32.005824000000004 70.931136,31.60032 70.931136C31.09344 70.931136,29.95296 71.868864,29.243328 72.67987199999999C26.53152 75.670464,25.64448 80.232384,25.64448 84.033984C25.64448 86.137536,25.923264000000003 88.51987199999999,26.176704 90.015168C26.252736 90.446016,26.278080000000003 90.522048,25.847231999999998 90.902208C20.57568 95.236032,15 100.456896,15 107.832C15 114.168,19.333824 120.199872,28.280256 120.199872M17.91456 110.265024C17.91456 108.110784,18.29472 105.221568,21.310656 101.800128C23.515584 99.367104,25.188288 97.998528,26.886336 96.629952C27.266496 96.325824,27.342528 96.37651199999999,27.41856 96.756672L28.17888 101.445312C28.280256 102.1296,28.280256 102.10425599999999,27.621312000000003 102.307008C24.427968 103.3968,22.324416 106.286016,22.324416 109.403328C22.324416 112.672704,24.047808 115.004352,26.53152 115.866048C26.835648 115.967424,27.266496 116.0688,27.519936 116.0688C27.798720000000003 116.0688,27.950784 115.891392,27.950784 115.663296C27.950784 115.409856,27.672 115.30848,27.41856 115.207104C25.872576000000002 114.54816,24.782784 112.976832,24.782784 111.304128C24.782784 109.200576,26.202048 107.654592,28.43232 107.020992C29.015232 106.868928,29.091264000000002 106.919616,29.167296 107.32512L30.992064 118.19769600000001C31.068096 118.6032,31.017408 118.6032,30.485184000000004 118.704576C29.902272000000004 118.805952,29.167296 118.881984,28.43232 118.881984C22.045632 118.881984,17.91456 115.33382399999999,17.91456 110.265024M32.157888 76.582848C33.349056000000004 76.582848,34.337472000000005 77.571264,34.337472000000005 79.57344C34.337472000000005 83.62848,30.865344 86.9232,28.001472 89.432256C27.748032000000002 89.660352,27.595968 89.609664,27.519936 89.128128C27.367872 88.1904,27.29184 86.948544,27.29184 85.78272C27.29184 80.08032,29.927616 76.582848,32.157888 76.582848M31.09344 106.742208C34.058688000000004 106.995648,36.49171200000001 109.47936,36.49171200000001 112.672704C36.49171200000001 114.979008,35.097792 116.82912,33.070272 117.868224C32.639424000000005 118.070976,32.563392 118.070976,32.48736 117.640128L30.687936 107.249088C30.611904000000003 106.792896,30.662592000000004 106.69152,31.09344 106.742208"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 80L410 80"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 90L410 90"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 100L410 100"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 110L410 110"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 120L410 120"></path><rect stroke-width="0.3" fill="black" stroke="black" stroke-dasharray="none" x="10" y="79.5" width="1" height="41"></rect><rect stroke-width="0.3" fill="black" stroke="black" stroke-dasharray="none" x="410" y="79.5" width="1" height="41"></rect><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M15 111M28.280256 120.199872C29.116608 120.199872,30.079680000000003 120.12384,30.814656 119.971776C31.194816000000003 119.89574400000001,31.270848 119.8704,31.346880000000002 120.301248C31.777728 122.759616,32.335296 125.927616,32.335296 127.651008C32.335296 133.04928,28.685760000000002 133.708224,26.53152 133.708224C24.554688 133.708224,23.61696 133.125312,23.61696 132.643776C23.61696 132.390336,23.946432 132.28896,24.782784 132.010176C25.923264000000003 131.680704,27.215808000000003 130.717632,27.215808000000003 128.588736C27.215808000000003 126.58656,25.948608 124.863168,23.718336 124.863168C21.285312 124.863168,19.81536 126.814656,19.81536 129.070272C19.81536 131.427264,21.234624 135.026112,26.759616 135.026112C29.19264 135.026112,33.931968 133.910976,33.931968 127.72704C33.931968 125.62348800000001,33.27302400000001 122.176704,32.892864 119.89574400000001C32.816832000000005 119.464896,32.842176 119.515584,33.349056000000004 119.287488C37.04928 117.817536,39.482304 114.725568,39.482304 110.594496C39.482304 105.9312,36.060864 101.800128,30.687936 101.800128C29.750208 101.800128,29.750208 101.800128,29.623488000000002 101.141184L28.711104 95.844288C28.660416 95.41344,28.711104 95.388096,28.9392 95.16C32.892864 91.48512,35.883456 86.847168,35.883456 81.246144C35.883456 78.078144,34.996415999999996 74.93548799999999,33.50112 72.75590399999999C32.943552 71.944896,32.005824000000004 70.931136,31.60032 70.931136C31.09344 70.931136,29.95296 71.868864,29.243328 72.67987199999999C26.53152 75.670464,25.64448 80.232384,25.64448 84.033984C25.64448 86.137536,25.923264000000003 88.51987199999999,26.176704 90.015168C26.252736 90.446016,26.278080000000003 90.522048,25.847231999999998 90.902208C20.57568 95.236032,15 100.456896,15 107.832C15 114.168,19.333824 120.199872,28.280256 120.199872M17.91456 110.265024C17.91456 108.110784,18.29472 105.221568,21.310656 101.800128C23.515584 99.367104,25.188288 97.998528,26.886336 96.629952C27.266496 96.325824,27.342528 96.37651199999999,27.41856 96.756672L28.17888 101.445312C28.280256 102.1296,28.280256 102.10425599999999,27.621312000000003 102.307008C24.427968 103.3968,22.324416 106.286016,22.324416 109.403328C22.324416 112.672704,24.047808 115.004352,26.53152 115.866048C26.835648 115.967424,27.266496 116.0688,27.519936 116.0688C27.798720000000003 116.0688,27.950784 115.891392,27.950784 115.663296C27.950784 115.409856,27.672 115.30848,27.41856 115.207104C25.872576000000002 114.54816,24.782784 112.976832,24.782784 111.304128C24.782784 109.200576,26.202048 107.654592,28.43232 107.020992C29.015232 106.868928,29.091264000000002 106.919616,29.167296 107.32512L30.992064 118.19769600000001C31.068096 118.6032,31.017408 118.6032,30.485184000000004 118.704576C29.902272000000004 118.805952,29.167296 118.881984,28.43232 118.881984C22.045632 118.881984,17.91456 115.33382399999999,17.91456 110.265024M32.157888 76.582848C33.349056000000004 76.582848,34.337472000000005 77.571264,34.337472000000005 79.57344C34.337472000000005 83.62848,30.865344 86.9232,28.001472 89.432256C27.748032000000002 89.660352,27.595968 89.609664,27.519936 89.128128C27.367872 88.1904,27.29184 86.948544,27.29184 85.78272C27.29184 80.08032,29.927616 76.582848,32.157888 76.582848M31.09344 106.742208C34.058688000000004 106.995648,36.49171200000001 109.47936,36.49171200000001 112.672704C36.49171200000001 114.979008,35.097792 116.82912,33.070272 117.868224C32.639424000000005 118.070976,32.563392 118.070976,32.48736 117.640128L30.687936 107.249088C30.611904000000003 106.792896,30.662592000000004 106.69152,31.09344 106.742208"></path><g class="vf-stavenote" id="vf-1"><g class="vf-note" pointer-events="bounding-box"><g class="vf-stem" pointer-events="bounding-box"><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M64.184 115L64.184 80"></path></g><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M53 115M53 116.6848C53 118.7908,54.74096 120.0544,56.9312 120.0544C60.52544 120.0544,64.934 116.74096,64.934 113.3152C64.934 111.23728,63.30536 109.9456,61.0028 109.9456C56.566159999999996 109.9456,53 113.23096,53 116.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-2"><g class="vf-note" pointer-events="bounding-box"><g class="vf-stem" pointer-events="bounding-box"><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M150.9505 105L150.9505 70"></path></g><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M139.7665 105M139.7665 106.6848C139.7665 108.7908,141.50746 110.0544,143.6977 110.0544C147.29194 110.0544,151.7005 106.74096,151.7005 103.3152C151.7005 101.23728,150.07186000000002 99.9456,147.76930000000002 99.9456C143.33266 99.9456,139.7665 103.23096,139.7665 106.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-3"><g class="vf-note" pointer-events="bounding-box"><g class="vf-stem" pointer-events="bounding-box"><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M227.28299999999996 97L227.28299999999996 130"></path></g><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M226.53299999999996 95M226.53299999999996 96.6848C226.53299999999996 98.7908,228.27395999999996 100.0544,230.46419999999995 100.0544C234.05843999999996 100.0544,238.46699999999996 96.74096,238.46699999999996 93.3152C238.46699999999996 91.23728,236.83835999999997 89.9456,234.53579999999997 89.9456C230.09915999999996 89.9456,226.53299999999996 93.23096,226.53299999999996 96.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-4"><g class="vf-note" pointer-events="bounding-box"><g class="vf-stem" pointer-events="bounding-box"><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M314.04949999999997 87L314.04949999999997 120"></path></g><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M313.29949999999997 85M313.29949999999997 86.6848C313.29949999999997 88.7908,315.04045999999994 90.0544,317.23069999999996 90.0544C320.82493999999997 90.0544,325.2335 86.74096,325.2335 83.3152C325.2335 81.23728,323.60486 79.9456,321.30229999999995 79.9456C316.86566 79.9456,313.29949999999997 83.23096,313.29949999999997 86.6848"></path></g></g><g class="vf-modifiers"></g></g></svg></div>';
    const actualTrimmed = el.shadowRoot.innerHTML.replace(/\s/g, '');
    const expectedTrimmed = expected.replace(/\s/g, '');

    expect(actualTrimmed).to.equal(expectedTrimmed);
  });

  it('simple accidentals (flats) render correctly', async() => {
    const el = await fixture(html`
      <vf-score>
        <vf-stave clef='treble' keySig='C'>
          <vf-voice>C4/q[id='1'], Db4[id='2'], Eb4[id='3'], F4[id='4']</vf-voice>
        </vf-stave>
      </vf-score>
    `);

    const expected = '<div id="vf-score"><slot></slot><svg width="500" height="200" viewBox="0 0 500 200" style="width: 500px; height: 200px;"><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 80L410 80"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 90L410 90"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 100L410 100"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 110L410 110"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 120L410 120"></path><rect stroke-width="0.3" fill="black" stroke="black" stroke-dasharray="none" x="10" y="79.5" width="1" height="41"></rect><rect stroke-width="0.3" fill="black" stroke="black" stroke-dasharray="none" x="410" y="79.5" width="1" height="41"></rect><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M15 111M28.280256 120.199872C29.116608 120.199872,30.079680000000003 120.12384,30.814656 119.971776C31.194816000000003 119.89574400000001,31.270848 119.8704,31.346880000000002 120.301248C31.777728 122.759616,32.335296 125.927616,32.335296 127.651008C32.335296 133.04928,28.685760000000002 133.708224,26.53152 133.708224C24.554688 133.708224,23.61696 133.125312,23.61696 132.643776C23.61696 132.390336,23.946432 132.28896,24.782784 132.010176C25.923264000000003 131.680704,27.215808000000003 130.717632,27.215808000000003 128.588736C27.215808000000003 126.58656,25.948608 124.863168,23.718336 124.863168C21.285312 124.863168,19.81536 126.814656,19.81536 129.070272C19.81536 131.427264,21.234624 135.026112,26.759616 135.026112C29.19264 135.026112,33.931968 133.910976,33.931968 127.72704C33.931968 125.62348800000001,33.27302400000001 122.176704,32.892864 119.89574400000001C32.816832000000005 119.464896,32.842176 119.515584,33.349056000000004 119.287488C37.04928 117.817536,39.482304 114.725568,39.482304 110.594496C39.482304 105.9312,36.060864 101.800128,30.687936 101.800128C29.750208 101.800128,29.750208 101.800128,29.623488000000002 101.141184L28.711104 95.844288C28.660416 95.41344,28.711104 95.388096,28.9392 95.16C32.892864 91.48512,35.883456 86.847168,35.883456 81.246144C35.883456 78.078144,34.996415999999996 74.93548799999999,33.50112 72.75590399999999C32.943552 71.944896,32.005824000000004 70.931136,31.60032 70.931136C31.09344 70.931136,29.95296 71.868864,29.243328 72.67987199999999C26.53152 75.670464,25.64448 80.232384,25.64448 84.033984C25.64448 86.137536,25.923264000000003 88.51987199999999,26.176704 90.015168C26.252736 90.446016,26.278080000000003 90.522048,25.847231999999998 90.902208C20.57568 95.236032,15 100.456896,15 107.832C15 114.168,19.333824 120.199872,28.280256 120.199872M17.91456 110.265024C17.91456 108.110784,18.29472 105.221568,21.310656 101.800128C23.515584 99.367104,25.188288 97.998528,26.886336 96.629952C27.266496 96.325824,27.342528 96.37651199999999,27.41856 96.756672L28.17888 101.445312C28.280256 102.1296,28.280256 102.10425599999999,27.621312000000003 102.307008C24.427968 103.3968,22.324416 106.286016,22.324416 109.403328C22.324416 112.672704,24.047808 115.004352,26.53152 115.866048C26.835648 115.967424,27.266496 116.0688,27.519936 116.0688C27.798720000000003 116.0688,27.950784 115.891392,27.950784 115.663296C27.950784 115.409856,27.672 115.30848,27.41856 115.207104C25.872576000000002 114.54816,24.782784 112.976832,24.782784 111.304128C24.782784 109.200576,26.202048 107.654592,28.43232 107.020992C29.015232 106.868928,29.091264000000002 106.919616,29.167296 107.32512L30.992064 118.19769600000001C31.068096 118.6032,31.017408 118.6032,30.485184000000004 118.704576C29.902272000000004 118.805952,29.167296 118.881984,28.43232 118.881984C22.045632 118.881984,17.91456 115.33382399999999,17.91456 110.265024M32.157888 76.582848C33.349056000000004 76.582848,34.337472000000005 77.571264,34.337472000000005 79.57344C34.337472000000005 83.62848,30.865344 86.9232,28.001472 89.432256C27.748032000000002 89.660352,27.595968 89.609664,27.519936 89.128128C27.367872 88.1904,27.29184 86.948544,27.29184 85.78272C27.29184 80.08032,29.927616 76.582848,32.157888 76.582848M31.09344 106.742208C34.058688000000004 106.995648,36.49171200000001 109.47936,36.49171200000001 112.672704C36.49171200000001 114.979008,35.097792 116.82912,33.070272 117.868224C32.639424000000005 118.070976,32.563392 118.070976,32.48736 117.640128L30.687936 107.249088C30.611904000000003 106.792896,30.662592000000004 106.69152,31.09344 106.742208"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 80L410 80"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 90L410 90"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 100L410 100"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 110L410 110"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 120L410 120"></path><rect stroke-width="0.3" fill="black" stroke="black" stroke-dasharray="none" x="10" y="79.5" width="1" height="41"></rect><rect stroke-width="0.3" fill="black" stroke="black" stroke-dasharray="none" x="410" y="79.5" width="1" height="41"></rect><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M15 111M28.280256 120.199872C29.116608 120.199872,30.079680000000003 120.12384,30.814656 119.971776C31.194816000000003 119.89574400000001,31.270848 119.8704,31.346880000000002 120.301248C31.777728 122.759616,32.335296 125.927616,32.335296 127.651008C32.335296 133.04928,28.685760000000002 133.708224,26.53152 133.708224C24.554688 133.708224,23.61696 133.125312,23.61696 132.643776C23.61696 132.390336,23.946432 132.28896,24.782784 132.010176C25.923264000000003 131.680704,27.215808000000003 130.717632,27.215808000000003 128.588736C27.215808000000003 126.58656,25.948608 124.863168,23.718336 124.863168C21.285312 124.863168,19.81536 126.814656,19.81536 129.070272C19.81536 131.427264,21.234624 135.026112,26.759616 135.026112C29.19264 135.026112,33.931968 133.910976,33.931968 127.72704C33.931968 125.62348800000001,33.27302400000001 122.176704,32.892864 119.89574400000001C32.816832000000005 119.464896,32.842176 119.515584,33.349056000000004 119.287488C37.04928 117.817536,39.482304 114.725568,39.482304 110.594496C39.482304 105.9312,36.060864 101.800128,30.687936 101.800128C29.750208 101.800128,29.750208 101.800128,29.623488000000002 101.141184L28.711104 95.844288C28.660416 95.41344,28.711104 95.388096,28.9392 95.16C32.892864 91.48512,35.883456 86.847168,35.883456 81.246144C35.883456 78.078144,34.996415999999996 74.93548799999999,33.50112 72.75590399999999C32.943552 71.944896,32.005824000000004 70.931136,31.60032 70.931136C31.09344 70.931136,29.95296 71.868864,29.243328 72.67987199999999C26.53152 75.670464,25.64448 80.232384,25.64448 84.033984C25.64448 86.137536,25.923264000000003 88.51987199999999,26.176704 90.015168C26.252736 90.446016,26.278080000000003 90.522048,25.847231999999998 90.902208C20.57568 95.236032,15 100.456896,15 107.832C15 114.168,19.333824 120.199872,28.280256 120.199872M17.91456 110.265024C17.91456 108.110784,18.29472 105.221568,21.310656 101.800128C23.515584 99.367104,25.188288 97.998528,26.886336 96.629952C27.266496 96.325824,27.342528 96.37651199999999,27.41856 96.756672L28.17888 101.445312C28.280256 102.1296,28.280256 102.10425599999999,27.621312000000003 102.307008C24.427968 103.3968,22.324416 106.286016,22.324416 109.403328C22.324416 112.672704,24.047808 115.004352,26.53152 115.866048C26.835648 115.967424,27.266496 116.0688,27.519936 116.0688C27.798720000000003 116.0688,27.950784 115.891392,27.950784 115.663296C27.950784 115.409856,27.672 115.30848,27.41856 115.207104C25.872576000000002 114.54816,24.782784 112.976832,24.782784 111.304128C24.782784 109.200576,26.202048 107.654592,28.43232 107.020992C29.015232 106.868928,29.091264000000002 106.919616,29.167296 107.32512L30.992064 118.19769600000001C31.068096 118.6032,31.017408 118.6032,30.485184000000004 118.704576C29.902272000000004 118.805952,29.167296 118.881984,28.43232 118.881984C22.045632 118.881984,17.91456 115.33382399999999,17.91456 110.265024M32.157888 76.582848C33.349056000000004 76.582848,34.337472000000005 77.571264,34.337472000000005 79.57344C34.337472000000005 83.62848,30.865344 86.9232,28.001472 89.432256C27.748032000000002 89.660352,27.595968 89.609664,27.519936 89.128128C27.367872 88.1904,27.29184 86.948544,27.29184 85.78272C27.29184 80.08032,29.927616 76.582848,32.157888 76.582848M31.09344 106.742208C34.058688000000004 106.995648,36.49171200000001 109.47936,36.49171200000001 112.672704C36.49171200000001 114.979008,35.097792 116.82912,33.070272 117.868224C32.639424000000005 118.070976,32.563392 118.070976,32.48736 117.640128L30.687936 107.249088C30.611904000000003 106.792896,30.662592000000004 106.69152,31.09344 106.742208"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M50 130L67.934 130"></path><g class="vf-stavenote" id="vf-1"><g class="vf-note" pointer-events="bounding-box"><g class="vf-stem" pointer-events="bounding-box"><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M64.184 130L64.184 95"></path></g><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M53 130M53 131.6848C53 133.7908,54.74096 135.0544,56.9312 135.0544C60.52544 135.0544,64.934 131.74096,64.934 128.3152C64.934 126.23728,63.30536 124.9456,61.0028 124.9456C56.566159999999996 124.9456,53 128.23096,53 131.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-2"><g class="vf-note" pointer-events="bounding-box"><g class="vf-stem" pointer-events="bounding-box"><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M150.9505 125L150.9505 90"></path></g><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M139.7665 125M139.7665 126.6848C139.7665 128.7908,141.50746 130.0544,143.6977 130.0544C147.29194 130.0544,151.7005 126.74096,151.7005 123.3152C151.7005 121.23728,150.07186000000002 119.9456,147.76930000000002 119.9456C143.33266 119.9456,139.7665 123.23096,139.7665 126.6848"></path></g></g><g class="vf-modifiers"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M127.87450000000001 125M128.33962000000002 131.7032C128.47642000000002 131.86736,128.58586000000003 131.89472,128.6953 131.89472C128.83210000000003 131.89472,128.94154 131.81264,128.94154 131.81264C130.11802 131.156,131.07562000000001 130.08896,132.06058000000002 129.40496C135.56266000000002 126.96992,136.7665 124.56224,136.7665 122.75648C136.7665 120.51296,135.04282 119.09024,133.23706 118.9808C132.55306000000002 118.9808,131.62282000000002 119.28176,131.07562000000001 119.63744C130.82938000000001 119.82896,130.39162000000002 120.18464,130.20010000000002 120.18464C130.11802 120.18464,130.09066 120.18464,130.00858000000002 120.15728C129.73498 120.04784,129.57082 119.74688,129.57082 119.47328C129.59818 118.62512,129.84442 109.15856,129.84442 108.36512C129.84442 107.92736,129.48874 107.70848000000001,129.1057 107.70848000000001C128.53114000000002 107.70848000000001,127.90186000000001 108.09152,127.87450000000001 108.80288C127.87450000000001 108.80288,128.03866000000002 131.2928,128.33962000000002 131.7032M129.68026 123.00272C129.95386000000002 122.20928,131.54074 121.06016,132.44362 121.06016C133.59274000000002 121.06016,134.05786 122.37344,134.05786 123.3584C134.05786 125.46512,132.2521 127.5992,130.55578 128.66624C130.39162000000002 128.74832,130.28218 128.77568,130.17274 128.77568C129.81706 128.77568,129.73498 128.39264,129.73498 128.20112C129.73498 128.20112,129.59818 125.8208,129.59818 124.26128C129.59818 123.632,129.65290000000002 123.13952,129.68026 123.00272"></path></g></g><g class="vf-stavenote" id="vf-3"><g class="vf-note" pointer-events="bounding-box"><g class="vf-stem" pointer-events="bounding-box"><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M237.71699999999996 120L237.71699999999996 85"></path></g><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M226.53299999999996 120M226.53299999999996 121.6848C226.53299999999996 123.7908,228.27395999999996 125.0544,230.46419999999995 125.0544C234.05843999999996 125.0544,238.46699999999996 121.74096,238.46699999999996 118.3152C238.46699999999996 116.23728,236.83835999999997 114.9456,234.53579999999997 114.9456C230.09915999999996 114.9456,226.53299999999996 118.23096,226.53299999999996 121.6848"></path></g></g><g class="vf-modifiers"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M214.64099999999996 120M215.10611999999998 126.7032C215.24291999999997 126.86736,215.35235999999998 126.89472,215.46179999999995 126.89472C215.59859999999998 126.89472,215.70803999999995 126.81264,215.70803999999995 126.81264C216.88451999999995 126.156,217.84211999999997 125.08896,218.82707999999997 124.40496C222.32915999999997 121.96992,223.53299999999996 119.56224,223.53299999999996 117.75648C223.53299999999996 115.51296,221.80931999999996 114.09024,220.00355999999996 113.9808C219.31955999999997 113.9808,218.38931999999997 114.28176,217.84211999999997 114.63744C217.59587999999997 114.82896,217.15811999999997 115.18464,216.96659999999997 115.18464C216.88451999999995 115.18464,216.85715999999996 115.18464,216.77507999999997 115.15728C216.50147999999996 115.04784,216.33731999999995 114.74688,216.33731999999995 114.47328C216.36467999999996 113.62512,216.61091999999996 104.15856,216.61091999999996 103.36512C216.61091999999996 102.92736,216.25523999999996 102.70848000000001,215.87219999999996 102.70848000000001C215.29763999999997 102.70848000000001,214.66835999999995 103.09152,214.64099999999996 103.80288C214.64099999999996 103.80288,214.80515999999997 126.2928,215.10611999999998 126.7032M216.44675999999995 118.00272C216.72035999999997 117.20928,218.30723999999995 116.06016,219.21011999999996 116.06016C220.35923999999997 116.06016,220.82435999999996 117.37344,220.82435999999996 118.3584C220.82435999999996 120.46512,219.01859999999996 122.5992,217.32227999999995 123.66624C217.15811999999997 123.74832,217.04867999999996 123.77568,216.93923999999996 123.77568C216.58355999999995 123.77568,216.50147999999996 123.39264,216.50147999999996 123.20112C216.50147999999996 123.20112,216.36467999999996 120.8208,216.36467999999996 119.26128C216.36467999999996 118.632,216.41939999999997 118.13952,216.44675999999995 118.00272"></path></g></g><g class="vf-stavenote" id="vf-4"><g class="vf-note" pointer-events="bounding-box"><g class="vf-stem" pointer-events="bounding-box"><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M324.4835 115L324.4835 80"></path></g><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M313.29949999999997 115M313.29949999999997 116.6848C313.29949999999997 118.7908,315.04045999999994 120.0544,317.23069999999996 120.0544C320.82493999999997 120.0544,325.2335 116.74096,325.2335 113.3152C325.2335 111.23728,323.60486 109.9456,321.30229999999995 109.9456C316.86566 109.9456,313.29949999999997 113.23096,313.29949999999997 116.6848"></path></g></g><g class="vf-modifiers"></g></g></svg></div>';
    const actualTrimmed = el.shadowRoot.innerHTML.replace(/\s/g, '');
    const expectedTrimmed = expected.replace(/\s/g, '');

    expect(actualTrimmed).to.equal(expectedTrimmed);
  });

  it('simple accidentals (sharps) render correctly', async() => {
    const el = await fixture(html`
      <vf-score>
        <vf-stave clef='treble' keySig='C'>
          <vf-voice>G4/q, A4, B4, C#5</vf-voice>
        </vf-stave>
      </vf-score>
    `);

    const expected = '<div id="vf-score"><slot></slot><svg width="500" height="200" viewBox="0 0 500 200" style="width: 500px; height: 200px;"><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 80L410 80"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 90L410 90"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 100L410 100"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 110L410 110"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 120L410 120"></path><rect stroke-width="0.3" fill="black" stroke="black" stroke-dasharray="none" x="10" y="79.5" width="1" height="41"></rect><rect stroke-width="0.3" fill="black" stroke="black" stroke-dasharray="none" x="410" y="79.5" width="1" height="41"></rect><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M15 111M28.280256 120.199872C29.116608 120.199872,30.079680000000003 120.12384,30.814656 119.971776C31.194816000000003 119.89574400000001,31.270848 119.8704,31.346880000000002 120.301248C31.777728 122.759616,32.335296 125.927616,32.335296 127.651008C32.335296 133.04928,28.685760000000002 133.708224,26.53152 133.708224C24.554688 133.708224,23.61696 133.125312,23.61696 132.643776C23.61696 132.390336,23.946432 132.28896,24.782784 132.010176C25.923264000000003 131.680704,27.215808000000003 130.717632,27.215808000000003 128.588736C27.215808000000003 126.58656,25.948608 124.863168,23.718336 124.863168C21.285312 124.863168,19.81536 126.814656,19.81536 129.070272C19.81536 131.427264,21.234624 135.026112,26.759616 135.026112C29.19264 135.026112,33.931968 133.910976,33.931968 127.72704C33.931968 125.62348800000001,33.27302400000001 122.176704,32.892864 119.89574400000001C32.816832000000005 119.464896,32.842176 119.515584,33.349056000000004 119.287488C37.04928 117.817536,39.482304 114.725568,39.482304 110.594496C39.482304 105.9312,36.060864 101.800128,30.687936 101.800128C29.750208 101.800128,29.750208 101.800128,29.623488000000002 101.141184L28.711104 95.844288C28.660416 95.41344,28.711104 95.388096,28.9392 95.16C32.892864 91.48512,35.883456 86.847168,35.883456 81.246144C35.883456 78.078144,34.996415999999996 74.93548799999999,33.50112 72.75590399999999C32.943552 71.944896,32.005824000000004 70.931136,31.60032 70.931136C31.09344 70.931136,29.95296 71.868864,29.243328 72.67987199999999C26.53152 75.670464,25.64448 80.232384,25.64448 84.033984C25.64448 86.137536,25.923264000000003 88.51987199999999,26.176704 90.015168C26.252736 90.446016,26.278080000000003 90.522048,25.847231999999998 90.902208C20.57568 95.236032,15 100.456896,15 107.832C15 114.168,19.333824 120.199872,28.280256 120.199872M17.91456 110.265024C17.91456 108.110784,18.29472 105.221568,21.310656 101.800128C23.515584 99.367104,25.188288 97.998528,26.886336 96.629952C27.266496 96.325824,27.342528 96.37651199999999,27.41856 96.756672L28.17888 101.445312C28.280256 102.1296,28.280256 102.10425599999999,27.621312000000003 102.307008C24.427968 103.3968,22.324416 106.286016,22.324416 109.403328C22.324416 112.672704,24.047808 115.004352,26.53152 115.866048C26.835648 115.967424,27.266496 116.0688,27.519936 116.0688C27.798720000000003 116.0688,27.950784 115.891392,27.950784 115.663296C27.950784 115.409856,27.672 115.30848,27.41856 115.207104C25.872576000000002 114.54816,24.782784 112.976832,24.782784 111.304128C24.782784 109.200576,26.202048 107.654592,28.43232 107.020992C29.015232 106.868928,29.091264000000002 106.919616,29.167296 107.32512L30.992064 118.19769600000001C31.068096 118.6032,31.017408 118.6032,30.485184000000004 118.704576C29.902272000000004 118.805952,29.167296 118.881984,28.43232 118.881984C22.045632 118.881984,17.91456 115.33382399999999,17.91456 110.265024M32.157888 76.582848C33.349056000000004 76.582848,34.337472000000005 77.571264,34.337472000000005 79.57344C34.337472000000005 83.62848,30.865344 86.9232,28.001472 89.432256C27.748032000000002 89.660352,27.595968 89.609664,27.519936 89.128128C27.367872 88.1904,27.29184 86.948544,27.29184 85.78272C27.29184 80.08032,29.927616 76.582848,32.157888 76.582848M31.09344 106.742208C34.058688000000004 106.995648,36.49171200000001 109.47936,36.49171200000001 112.672704C36.49171200000001 114.979008,35.097792 116.82912,33.070272 117.868224C32.639424000000005 118.070976,32.563392 118.070976,32.48736 117.640128L30.687936 107.249088C30.611904000000003 106.792896,30.662592000000004 106.69152,31.09344 106.742208"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 80L410 80"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 90L410 90"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 100L410 100"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 110L410 110"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 120L410 120"></path><rect stroke-width="0.3" fill="black" stroke="black" stroke-dasharray="none" x="10" y="79.5" width="1" height="41"></rect><rect stroke-width="0.3" fill="black" stroke="black" stroke-dasharray="none" x="410" y="79.5" width="1" height="41"></rect><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M15 111M28.280256 120.199872C29.116608 120.199872,30.079680000000003 120.12384,30.814656 119.971776C31.194816000000003 119.89574400000001,31.270848 119.8704,31.346880000000002 120.301248C31.777728 122.759616,32.335296 125.927616,32.335296 127.651008C32.335296 133.04928,28.685760000000002 133.708224,26.53152 133.708224C24.554688 133.708224,23.61696 133.125312,23.61696 132.643776C23.61696 132.390336,23.946432 132.28896,24.782784 132.010176C25.923264000000003 131.680704,27.215808000000003 130.717632,27.215808000000003 128.588736C27.215808000000003 126.58656,25.948608 124.863168,23.718336 124.863168C21.285312 124.863168,19.81536 126.814656,19.81536 129.070272C19.81536 131.427264,21.234624 135.026112,26.759616 135.026112C29.19264 135.026112,33.931968 133.910976,33.931968 127.72704C33.931968 125.62348800000001,33.27302400000001 122.176704,32.892864 119.89574400000001C32.816832000000005 119.464896,32.842176 119.515584,33.349056000000004 119.287488C37.04928 117.817536,39.482304 114.725568,39.482304 110.594496C39.482304 105.9312,36.060864 101.800128,30.687936 101.800128C29.750208 101.800128,29.750208 101.800128,29.623488000000002 101.141184L28.711104 95.844288C28.660416 95.41344,28.711104 95.388096,28.9392 95.16C32.892864 91.48512,35.883456 86.847168,35.883456 81.246144C35.883456 78.078144,34.996415999999996 74.93548799999999,33.50112 72.75590399999999C32.943552 71.944896,32.005824000000004 70.931136,31.60032 70.931136C31.09344 70.931136,29.95296 71.868864,29.243328 72.67987199999999C26.53152 75.670464,25.64448 80.232384,25.64448 84.033984C25.64448 86.137536,25.923264000000003 88.51987199999999,26.176704 90.015168C26.252736 90.446016,26.278080000000003 90.522048,25.847231999999998 90.902208C20.57568 95.236032,15 100.456896,15 107.832C15 114.168,19.333824 120.199872,28.280256 120.199872M17.91456 110.265024C17.91456 108.110784,18.29472 105.221568,21.310656 101.800128C23.515584 99.367104,25.188288 97.998528,26.886336 96.629952C27.266496 96.325824,27.342528 96.37651199999999,27.41856 96.756672L28.17888 101.445312C28.280256 102.1296,28.280256 102.10425599999999,27.621312000000003 102.307008C24.427968 103.3968,22.324416 106.286016,22.324416 109.403328C22.324416 112.672704,24.047808 115.004352,26.53152 115.866048C26.835648 115.967424,27.266496 116.0688,27.519936 116.0688C27.798720000000003 116.0688,27.950784 115.891392,27.950784 115.663296C27.950784 115.409856,27.672 115.30848,27.41856 115.207104C25.872576000000002 114.54816,24.782784 112.976832,24.782784 111.304128C24.782784 109.200576,26.202048 107.654592,28.43232 107.020992C29.015232 106.868928,29.091264000000002 106.919616,29.167296 107.32512L30.992064 118.19769600000001C31.068096 118.6032,31.017408 118.6032,30.485184000000004 118.704576C29.902272000000004 118.805952,29.167296 118.881984,28.43232 118.881984C22.045632 118.881984,17.91456 115.33382399999999,17.91456 110.265024M32.157888 76.582848C33.349056000000004 76.582848,34.337472000000005 77.571264,34.337472000000005 79.57344C34.337472000000005 83.62848,30.865344 86.9232,28.001472 89.432256C27.748032000000002 89.660352,27.595968 89.609664,27.519936 89.128128C27.367872 88.1904,27.29184 86.948544,27.29184 85.78272C27.29184 80.08032,29.927616 76.582848,32.157888 76.582848M31.09344 106.742208C34.058688000000004 106.995648,36.49171200000001 109.47936,36.49171200000001 112.672704C36.49171200000001 114.979008,35.097792 116.82912,33.070272 117.868224C32.639424000000005 118.070976,32.563392 118.070976,32.48736 117.640128L30.687936 107.249088C30.611904000000003 106.792896,30.662592000000004 106.69152,31.09344 106.742208"></path><g class="vf-stavenote" id="vf-auto1158"><g class="vf-note" pointer-events="bounding-box"><g class="vf-stem" pointer-events="bounding-box"><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M64.184 110L64.184 75"></path></g><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M53 110M53 111.6848C53 113.7908,54.74096 115.0544,56.9312 115.0544C60.52544 115.0544,64.934 111.74096,64.934 108.3152C64.934 106.23728,63.30536 104.9456,61.0028 104.9456C56.566159999999996 104.9456,53 108.23096,53 111.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-auto1166"><g class="vf-note" pointer-events="bounding-box"><g class="vf-stem" pointer-events="bounding-box"><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M150.9505 105L150.9505 70"></path></g><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M139.7665 105M139.7665 106.6848C139.7665 108.7908,141.50746 110.0544,143.6977 110.0544C147.29194 110.0544,151.7005 106.74096,151.7005 103.3152C151.7005 101.23728,150.07186000000002 99.9456,147.76930000000002 99.9456C143.33266 99.9456,139.7665 103.23096,139.7665 106.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-auto1174"><g class="vf-note" pointer-events="bounding-box"><g class="vf-stem" pointer-events="bounding-box"><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M237.71699999999996 100L237.71699999999996 65"></path></g><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M226.53299999999996 100M226.53299999999996 101.6848C226.53299999999996 103.7908,228.27395999999996 105.0544,230.46419999999995 105.0544C234.05843999999996 105.0544,238.46699999999996 101.74096,238.46699999999996 98.3152C238.46699999999996 96.23728,236.83835999999997 94.9456,234.53579999999997 94.9456C230.09915999999996 94.9456,226.53299999999996 98.23096,226.53299999999996 101.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-auto1182"><g class="vf-note" pointer-events="bounding-box"><g class="vf-stem" pointer-events="bounding-box"><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M324.4835 95L324.4835 60"></path></g><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M313.29949999999997 95M313.29949999999997 96.6848C313.29949999999997 98.7908,315.04045999999994 100.0544,317.23069999999996 100.0544C320.82493999999997 100.0544,325.2335 96.74096,325.2335 93.3152C325.2335 91.23728,323.60486 89.9456,321.30229999999995 89.9456C316.86566 89.9456,313.29949999999997 93.23096,313.29949999999997 96.6848"></path></g></g><g class="vf-modifiers"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M300.47725999999994 95M300.80557999999996 93.98768C300.94237999999996 93.98768,301.70845999999995 93.632,301.81789999999995 93.54992C301.84525999999994 93.54992,301.89997999999997 93.4952,301.92733999999996 93.4952C302.20093999999995 93.4952,302.44717999999995 93.9056,302.44717999999995 94.20656L302.44717999999995 98.11904C302.44717999999995 98.5568,302.2556599999999 98.91248,302.0094199999999 99.02192C301.79053999999996 99.104,300.94237999999996 99.45968,300.94237999999996 99.45968C300.66877999999997 99.54176,300.47725999999994 99.84272,300.47725999999994 100.08896L300.47725999999994 102.87968C300.47725999999994 103.12592,300.58669999999995 103.23536,300.80557999999996 103.23536C300.83293999999995 103.23536,300.91501999999997 103.208,300.94237999999996 103.208C300.94237999999996 103.208,301.48957999999993 102.96176,301.84525999999994 102.85232C301.89997999999997 102.7976,301.92733999999996 102.7976,301.98205999999993 102.7976C302.2556599999999 102.7976,302.44717999999995 103.23536,302.44717999999995 103.42688L302.44717999999995 108.2696C302.44717999999995 108.51584,302.69341999999995 108.70736,302.96701999999993 108.70736C303.3500599999999 108.70736,303.62366 108.51584,303.62366 108.2696L303.62366 102.7976C303.62366 102.27776,303.81517999999994 102.00416,304.03405999999995 101.92208L306.41437999999994 100.93712C306.46909999999997 100.93712,306.55117999999993 100.90976,306.5785399999999 100.90976C306.90685999999994 100.90976,307.09837999999996 101.37488,307.09837999999996 101.62112L307.09837999999996 106.54592C307.09837999999996 106.79216,307.34461999999996 106.98367999999999,307.61821999999995 106.98367999999999C308.02861999999993 106.98367999999999,308.27485999999993 106.79216,308.27485999999993 106.54592L308.27485999999993 100.93712C308.27485999999993 100.63616,308.43901999999997 100.17104,308.71261999999996 100.03424C308.98621999999995 99.9248,309.80701999999997 99.59648,309.80701999999997 99.59648C310.08061999999995 99.48704,310.29949999999997 99.18608,310.29949999999997 98.93984L310.29949999999997 96.14912C310.29949999999997 95.9576,310.1627 95.8208,309.99853999999993 95.8208C309.94381999999996 95.8208,309.8890999999999 95.8208,309.80701999999997 95.87552L308.7946999999999 96.25856C308.5484599999999 96.25856,308.27485999999993 96.01232,308.27485999999993 95.5472L308.27485999999993 91.88096C308.27485999999993 91.60736,308.46637999999996 90.86864,308.7946999999999 90.73184L309.80701999999997 90.3488C310.08061999999995 90.23936,310.29949999999997 89.91104,310.29949999999997 89.69216L310.29949999999997 86.87408C310.29949999999997 86.68256,310.1627 86.57312,309.99853999999993 86.57312C309.94381999999996 86.57312,309.8890999999999 86.57312,309.80701999999997 86.60048C309.80701999999997 86.60048,309.01357999999993 86.9288,308.82205999999996 86.95616C308.5484599999999 86.95616,308.27485999999993 86.76464,308.27485999999993 86.46368L308.27485999999993 81.64832C308.27485999999993 81.40208,308.02861999999993 81.21056,307.72765999999996 81.21056C307.34461999999996 81.21056,307.09837999999996 81.40208,307.09837999999996 81.64832L307.09837999999996 86.76464C307.04365999999993 87.14768,306.9342199999999 87.66752,306.5785399999999 87.91376C306.11341999999996 88.18736,304.77277999999995 88.73456,304.08877999999993 88.89872C303.76045999999997 88.89872,303.62366 88.4336,303.62366 88.10528L303.62366 83.372C303.62366 83.15312,303.3500599999999 82.93424,303.07645999999994 82.93424C302.69341999999995 82.93424,302.44717999999995 83.15312,302.44717999999995 83.372L302.44717999999995 88.7072C302.44717999999995 89.2544,302.20093999999995 89.63744,301.98205999999993 89.74688C301.73581999999993 89.88368,300.94237999999996 90.18464,300.94237999999996 90.18464C300.66877999999997 90.26672,300.47725999999994 90.59504,300.47725999999994 90.81392L300.47725999999994 93.632C300.47725999999994 93.85088,300.58669999999995 93.98768,300.80557999999996 93.98768M303.51421999999997 96.17648C303.51421999999997 94.97264,303.54157999999995 93.57728,303.62366 93.27632C303.70573999999993 92.59232,305.51149999999996 91.77152,306.49645999999996 91.77152C306.77005999999994 91.77152,307.01629999999994 91.8536,307.09837999999996 92.01776C307.1804599999999 92.20928,307.26253999999994 93.19424,307.26253999999994 94.26128C307.26253999999994 95.32832,307.1804599999999 96.42272,307.09837999999996 96.7784C306.85213999999996 97.57184,305.01901999999995 98.33792,304.08877999999993 98.33792C303.8698999999999 98.33792,303.67837999999995 98.2832,303.62366 98.1464C303.54157999999995 97.98224,303.51421999999997 97.13408,303.51421999999997 96.17648"></path></g></g></svg></div>';
    const actualTrimmed = el.shadowRoot.innerHTML.replace(/\s/g, '').replace(/id="vf-auto(.*?)"/g, '');
    const expectedTrimmed = expected.replace(/\s/g, '').replace(/id="vf-auto(.*?)"/g, '');

    expect(actualTrimmed).to.equal(expectedTrimmed);
  });

  it('autobeamed notes', async() => {
    const el = await fixture(html`
      <vf-score>
        <vf-stave clef='treble' timeSig='4/4'>
          <vf-voice stem='down' autoBeam>c4/8, f5, d5, g5, d6/8, f5, d5, g5</vf-voice>
        </vf-stave>
      </vf-score>
    `);

    const expected = '<div id="vf-score"><slot></slot><svg width="500" height="200" viewBox="0 0 500 200" style="width: 500px; height: 200px;"><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 80L410 80"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 90L410 90"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 100L410 100"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 110L410 110"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 120L410 120"></path><rect stroke-width="0.3" fill="black" stroke="black" stroke-dasharray="none" x="10" y="79.5" width="1" height="41"></rect><rect stroke-width="0.3" fill="black" stroke="black" stroke-dasharray="none" x="410" y="79.5" width="1" height="41"></rect><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M15 111M28.280256 120.199872C29.116608 120.199872,30.079680000000003 120.12384,30.814656 119.971776C31.194816000000003 119.89574400000001,31.270848 119.8704,31.346880000000002 120.301248C31.777728 122.759616,32.335296 125.927616,32.335296 127.651008C32.335296 133.04928,28.685760000000002 133.708224,26.53152 133.708224C24.554688 133.708224,23.61696 133.125312,23.61696 132.643776C23.61696 132.390336,23.946432 132.28896,24.782784 132.010176C25.923264000000003 131.680704,27.215808000000003 130.717632,27.215808000000003 128.588736C27.215808000000003 126.58656,25.948608 124.863168,23.718336 124.863168C21.285312 124.863168,19.81536 126.814656,19.81536 129.070272C19.81536 131.427264,21.234624 135.026112,26.759616 135.026112C29.19264 135.026112,33.931968 133.910976,33.931968 127.72704C33.931968 125.62348800000001,33.27302400000001 122.176704,32.892864 119.89574400000001C32.816832000000005 119.464896,32.842176 119.515584,33.349056000000004 119.287488C37.04928 117.817536,39.482304 114.725568,39.482304 110.594496C39.482304 105.9312,36.060864 101.800128,30.687936 101.800128C29.750208 101.800128,29.750208 101.800128,29.623488000000002 101.141184L28.711104 95.844288C28.660416 95.41344,28.711104 95.388096,28.9392 95.16C32.892864 91.48512,35.883456 86.847168,35.883456 81.246144C35.883456 78.078144,34.996415999999996 74.93548799999999,33.50112 72.75590399999999C32.943552 71.944896,32.005824000000004 70.931136,31.60032 70.931136C31.09344 70.931136,29.95296 71.868864,29.243328 72.67987199999999C26.53152 75.670464,25.64448 80.232384,25.64448 84.033984C25.64448 86.137536,25.923264000000003 88.51987199999999,26.176704 90.015168C26.252736 90.446016,26.278080000000003 90.522048,25.847231999999998 90.902208C20.57568 95.236032,15 100.456896,15 107.832C15 114.168,19.333824 120.199872,28.280256 120.199872M17.91456 110.265024C17.91456 108.110784,18.29472 105.221568,21.310656 101.800128C23.515584 99.367104,25.188288 97.998528,26.886336 96.629952C27.266496 96.325824,27.342528 96.37651199999999,27.41856 96.756672L28.17888 101.445312C28.280256 102.1296,28.280256 102.10425599999999,27.621312000000003 102.307008C24.427968 103.3968,22.324416 106.286016,22.324416 109.403328C22.324416 112.672704,24.047808 115.004352,26.53152 115.866048C26.835648 115.967424,27.266496 116.0688,27.519936 116.0688C27.798720000000003 116.0688,27.950784 115.891392,27.950784 115.663296C27.950784 115.409856,27.672 115.30848,27.41856 115.207104C25.872576000000002 114.54816,24.782784 112.976832,24.782784 111.304128C24.782784 109.200576,26.202048 107.654592,28.43232 107.020992C29.015232 106.868928,29.091264000000002 106.919616,29.167296 107.32512L30.992064 118.19769600000001C31.068096 118.6032,31.017408 118.6032,30.485184000000004 118.704576C29.902272000000004 118.805952,29.167296 118.881984,28.43232 118.881984C22.045632 118.881984,17.91456 115.33382399999999,17.91456 110.265024M32.157888 76.582848C33.349056000000004 76.582848,34.337472000000005 77.571264,34.337472000000005 79.57344C34.337472000000005 83.62848,30.865344 86.9232,28.001472 89.432256C27.748032000000002 89.660352,27.595968 89.609664,27.519936 89.128128C27.367872 88.1904,27.29184 86.948544,27.29184 85.78272C27.29184 80.08032,29.927616 76.582848,32.157888 76.582848M31.09344 106.742208C34.058688000000004 106.995648,36.49171200000001 109.47936,36.49171200000001 112.672704C36.49171200000001 114.979008,35.097792 116.82912,33.070272 117.868224C32.639424000000005 118.070976,32.563392 118.070976,32.48736 117.640128L30.687936 107.249088C30.611904000000003 106.792896,30.662592000000004 106.69152,31.09344 106.742208"></path><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M56 90M57.41984 93.94128L63.956 93.94128L63.956 96.16896C63.956 97.12368,63.19712 97.39296,62.56064 97.39296C61.9976 97.39296,61.7528 97.7112,61.7528 98.0784C61.7528 98.42112,61.8752 98.8128,62.413759999999996 98.8128L69.92912 98.8128C70.27184 98.8128,70.63904 98.568,70.63904 98.0784C70.63904 97.58879999999999,70.19839999999999 97.36848,69.85568 97.36848C69.51295999999999 97.36848,68.75408 97.14816,68.75408 96.02208L68.75408 93.94128L71.32448 93.94128C71.69167999999999 93.94128,71.86304 93.69648,71.86304 93.28032C71.86304 92.86416,71.71616 92.61936,71.32448 92.61936L68.75408 92.61936L68.75408 85.05504C68.75408 84.78576,68.7296 84.46752000000001,68.33792 84.46752000000001C68.01968 84.46752000000001,67.84832 84.54096,67.628 84.78576L64.27423999999999 88.82496C64.15183999999999 89.0208,63.956 89.21664,63.956 89.65728L63.956 92.61936L59.20688 92.61936C62.02208 90.22032,67.67696 82.21536,67.77488 81.82368C67.77488 81.75024,67.79936 81.72576000000001,67.79936 81.65232C67.79936 81.35856,67.55456 81.16272000000001,67.28528 81.16272000000001C66.96704 81.16272000000001,65.52271999999999 81.21168,64.88624 81.21168C64.24976 81.21168,62.65856 81.16272000000001,62.38928 81.16272000000001C62.071039999999996 81.16272000000001,61.58144 81.26064,61.58144 81.82368C61.58144 86.18112,58.10528 91.1016,57.05264 92.5704L56.8568 92.86416C56.8568 92.88864,56.80784 92.9376,56.80784 92.96208C56.7344 93.10896,56.70992 93.23136,56.70992 93.35376C56.70992 93.69648,56.9792 93.94128,57.41984 93.94128"></path><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M56 110M57.41984 113.94128L63.956 113.94128L63.956 116.16896C63.956 117.12368,63.19712 117.39296,62.56064 117.39296C61.9976 117.39296,61.7528 117.7112,61.7528 118.0784C61.7528 118.42112,61.8752 118.8128,62.413759999999996 118.8128L69.92912 118.8128C70.27184 118.8128,70.63904 118.568,70.63904 118.0784C70.63904 117.58879999999999,70.19839999999999 117.36848,69.85568 117.36848C69.51295999999999 117.36848,68.75408 117.14816,68.75408 116.02208L68.75408 113.94128L71.32448 113.94128C71.69167999999999 113.94128,71.86304 113.69648,71.86304 113.28032C71.86304 112.86416,71.71616 112.61936,71.32448 112.61936L68.75408 112.61936L68.75408 105.05504C68.75408 104.78576,68.7296 104.46752000000001,68.33792 104.46752000000001C68.01968 104.46752000000001,67.84832 104.54096,67.628 104.78576L64.27423999999999 108.82496C64.15183999999999 109.0208,63.956 109.21664,63.956 109.65728L63.956 112.61936L59.20688 112.61936C62.02208 110.22032,67.67696 102.21536,67.77488 101.82368C67.77488 101.75024,67.79936 101.72576000000001,67.79936 101.65232C67.79936 101.35856,67.55456 101.16272000000001,67.28528 101.16272000000001C66.96704 101.16272000000001,65.52271999999999 101.21168,64.88624 101.21168C64.24976 101.21168,62.65856 101.16272000000001,62.38928 101.16272000000001C62.071039999999996 101.16272000000001,61.58144 101.26064,61.58144 101.82368C61.58144 106.18112,58.10528 111.1016,57.05264 112.5704L56.8568 112.86416C56.8568 112.88864,56.80784 112.9376,56.80784 112.96208C56.7344 113.10896,56.70992 113.23136,56.70992 113.35376C56.70992 113.69648,56.9792 113.94128,57.41984 113.94128"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 80L410 80"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 90L410 90"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 100L410 100"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 110L410 110"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 120L410 120"></path><rect stroke-width="0.3" fill="black" stroke="black" stroke-dasharray="none" x="10" y="79.5" width="1" height="41"></rect><rect stroke-width="0.3" fill="black" stroke="black" stroke-dasharray="none" x="410" y="79.5" width="1" height="41"></rect><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M15 111M28.280256 120.199872C29.116608 120.199872,30.079680000000003 120.12384,30.814656 119.971776C31.194816000000003 119.89574400000001,31.270848 119.8704,31.346880000000002 120.301248C31.777728 122.759616,32.335296 125.927616,32.335296 127.651008C32.335296 133.04928,28.685760000000002 133.708224,26.53152 133.708224C24.554688 133.708224,23.61696 133.125312,23.61696 132.643776C23.61696 132.390336,23.946432 132.28896,24.782784 132.010176C25.923264000000003 131.680704,27.215808000000003 130.717632,27.215808000000003 128.588736C27.215808000000003 126.58656,25.948608 124.863168,23.718336 124.863168C21.285312 124.863168,19.81536 126.814656,19.81536 129.070272C19.81536 131.427264,21.234624 135.026112,26.759616 135.026112C29.19264 135.026112,33.931968 133.910976,33.931968 127.72704C33.931968 125.62348800000001,33.27302400000001 122.176704,32.892864 119.89574400000001C32.816832000000005 119.464896,32.842176 119.515584,33.349056000000004 119.287488C37.04928 117.817536,39.482304 114.725568,39.482304 110.594496C39.482304 105.9312,36.060864 101.800128,30.687936 101.800128C29.750208 101.800128,29.750208 101.800128,29.623488000000002 101.141184L28.711104 95.844288C28.660416 95.41344,28.711104 95.388096,28.9392 95.16C32.892864 91.48512,35.883456 86.847168,35.883456 81.246144C35.883456 78.078144,34.996415999999996 74.93548799999999,33.50112 72.75590399999999C32.943552 71.944896,32.005824000000004 70.931136,31.60032 70.931136C31.09344 70.931136,29.95296 71.868864,29.243328 72.67987199999999C26.53152 75.670464,25.64448 80.232384,25.64448 84.033984C25.64448 86.137536,25.923264000000003 88.51987199999999,26.176704 90.015168C26.252736 90.446016,26.278080000000003 90.522048,25.847231999999998 90.902208C20.57568 95.236032,15 100.456896,15 107.832C15 114.168,19.333824 120.199872,28.280256 120.199872M17.91456 110.265024C17.91456 108.110784,18.29472 105.221568,21.310656 101.800128C23.515584 99.367104,25.188288 97.998528,26.886336 96.629952C27.266496 96.325824,27.342528 96.37651199999999,27.41856 96.756672L28.17888 101.445312C28.280256 102.1296,28.280256 102.10425599999999,27.621312000000003 102.307008C24.427968 103.3968,22.324416 106.286016,22.324416 109.403328C22.324416 112.672704,24.047808 115.004352,26.53152 115.866048C26.835648 115.967424,27.266496 116.0688,27.519936 116.0688C27.798720000000003 116.0688,27.950784 115.891392,27.950784 115.663296C27.950784 115.409856,27.672 115.30848,27.41856 115.207104C25.872576000000002 114.54816,24.782784 112.976832,24.782784 111.304128C24.782784 109.200576,26.202048 107.654592,28.43232 107.020992C29.015232 106.868928,29.091264000000002 106.919616,29.167296 107.32512L30.992064 118.19769600000001C31.068096 118.6032,31.017408 118.6032,30.485184000000004 118.704576C29.902272000000004 118.805952,29.167296 118.881984,28.43232 118.881984C22.045632 118.881984,17.91456 115.33382399999999,17.91456 110.265024M32.157888 76.582848C33.349056000000004 76.582848,34.337472000000005 77.571264,34.337472000000005 79.57344C34.337472000000005 83.62848,30.865344 86.9232,28.001472 89.432256C27.748032000000002 89.660352,27.595968 89.609664,27.519936 89.128128C27.367872 88.1904,27.29184 86.948544,27.29184 85.78272C27.29184 80.08032,29.927616 76.582848,32.157888 76.582848M31.09344 106.742208C34.058688000000004 106.995648,36.49171200000001 109.47936,36.49171200000001 112.672704C36.49171200000001 114.979008,35.097792 116.82912,33.070272 117.868224C32.639424000000005 118.070976,32.563392 118.070976,32.48736 117.640128L30.687936 107.249088C30.611904000000003 106.792896,30.662592000000004 106.69152,31.09344 106.742208"></path><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M56 90M57.41984 93.94128L63.956 93.94128L63.956 96.16896C63.956 97.12368,63.19712 97.39296,62.56064 97.39296C61.9976 97.39296,61.7528 97.7112,61.7528 98.0784C61.7528 98.42112,61.8752 98.8128,62.413759999999996 98.8128L69.92912 98.8128C70.27184 98.8128,70.63904 98.568,70.63904 98.0784C70.63904 97.58879999999999,70.19839999999999 97.36848,69.85568 97.36848C69.51295999999999 97.36848,68.75408 97.14816,68.75408 96.02208L68.75408 93.94128L71.32448 93.94128C71.69167999999999 93.94128,71.86304 93.69648,71.86304 93.28032C71.86304 92.86416,71.71616 92.61936,71.32448 92.61936L68.75408 92.61936L68.75408 85.05504C68.75408 84.78576,68.7296 84.46752000000001,68.33792 84.46752000000001C68.01968 84.46752000000001,67.84832 84.54096,67.628 84.78576L64.27423999999999 88.82496C64.15183999999999 89.0208,63.956 89.21664,63.956 89.65728L63.956 92.61936L59.20688 92.61936C62.02208 90.22032,67.67696 82.21536,67.77488 81.82368C67.77488 81.75024,67.79936 81.72576000000001,67.79936 81.65232C67.79936 81.35856,67.55456 81.16272000000001,67.28528 81.16272000000001C66.96704 81.16272000000001,65.52271999999999 81.21168,64.88624 81.21168C64.24976 81.21168,62.65856 81.16272000000001,62.38928 81.16272000000001C62.071039999999996 81.16272000000001,61.58144 81.26064,61.58144 81.82368C61.58144 86.18112,58.10528 91.1016,57.05264 92.5704L56.8568 92.86416C56.8568 92.88864,56.80784 92.9376,56.80784 92.96208C56.7344 93.10896,56.70992 93.23136,56.70992 93.35376C56.70992 93.69648,56.9792 93.94128,57.41984 93.94128"></path><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M56 110M57.41984 113.94128L63.956 113.94128L63.956 116.16896C63.956 117.12368,63.19712 117.39296,62.56064 117.39296C61.9976 117.39296,61.7528 117.7112,61.7528 118.0784C61.7528 118.42112,61.8752 118.8128,62.413759999999996 118.8128L69.92912 118.8128C70.27184 118.8128,70.63904 118.568,70.63904 118.0784C70.63904 117.58879999999999,70.19839999999999 117.36848,69.85568 117.36848C69.51295999999999 117.36848,68.75408 117.14816,68.75408 116.02208L68.75408 113.94128L71.32448 113.94128C71.69167999999999 113.94128,71.86304 113.69648,71.86304 113.28032C71.86304 112.86416,71.71616 112.61936,71.32448 112.61936L68.75408 112.61936L68.75408 105.05504C68.75408 104.78576,68.7296 104.46752000000001,68.33792 104.46752000000001C68.01968 104.46752000000001,67.84832 104.54096,67.628 104.78576L64.27423999999999 108.82496C64.15183999999999 109.0208,63.956 109.21664,63.956 109.65728L63.956 112.61936L59.20688 112.61936C62.02208 110.22032,67.67696 102.21536,67.77488 101.82368C67.77488 101.75024,67.79936 101.72576000000001,67.79936 101.65232C67.79936 101.35856,67.55456 101.16272000000001,67.28528 101.16272000000001C66.96704 101.16272000000001,65.52271999999999 101.21168,64.88624 101.21168C64.24976 101.21168,62.65856 101.16272000000001,62.38928 101.16272000000001C62.071039999999996 101.16272000000001,61.58144 101.26064,61.58144 101.82368C61.58144 106.18112,58.10528 111.1016,57.05264 112.5704L56.8568 112.86416C56.8568 112.88864,56.80784 112.9376,56.80784 112.96208C56.7344 113.10896,56.70992 113.23136,56.70992 113.35376C56.70992 113.69648,56.9792 113.94128,57.41984 113.94128"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M80.15312 130L98.08712 130"></path><g class="vf-stavenote" id="vf-auto1018"><g class="vf-note" pointer-events="bounding-box"><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M83.15312 130M83.15312 131.6848C83.15312 133.7908,84.89408 135.0544,87.08432 135.0544C90.67856 135.0544,95.08712 131.74096,95.08712 128.3152C95.08712 126.23728,93.45848000000001 124.9456,91.15592000000001 124.9456C86.71928 124.9456,83.15312 128.23096,83.15312 131.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-auto1028"><g class="vf-note" pointer-events="bounding-box"><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M122.76722999999998 80M122.76722999999998 81.6848C122.76722999999998 83.7908,124.50818999999998 85.0544,126.69842999999999 85.0544C130.29267 85.0544,134.70122999999998 81.74096,134.70122999999998 78.3152C134.70122999999998 76.23728,133.07259 74.9456,130.77003 74.9456C126.33338999999998 74.9456,122.76722999999998 78.23096,122.76722999999998 81.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-auto1038"><g class="vf-note" pointer-events="bounding-box"><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M162.38133999999997 90M162.38133999999997 91.6848C162.38133999999997 93.7908,164.12229999999997 95.0544,166.31253999999996 95.0544C169.90677999999997 95.0544,174.31533999999996 91.74096,174.31533999999996 88.3152C174.31533999999996 86.23728,172.68669999999997 84.9456,170.38413999999997 84.9456C165.94749999999996 84.9456,162.38133999999997 88.23096,162.38133999999997 91.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-auto1048"><g class="vf-note" pointer-events="bounding-box"><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M201.99544999999995 75M201.99544999999995 76.6848C201.99544999999995 78.7908,203.73640999999995 80.0544,205.92664999999994 80.0544C209.52088999999995 80.0544,213.92944999999995 76.74096,213.92944999999995 73.3152C213.92944999999995 71.23728,212.30080999999996 69.9456,209.99824999999996 69.9456C205.56160999999994 69.9456,201.99544999999995 73.23096,201.99544999999995 76.6848"></path></g></g><g class="vf-modifiers"></g></g><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M238.60955999999993 70L256.54355999999996 70"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M238.60955999999993 60L256.54355999999996 60"></path><g class="vf-stavenote" id="vf-auto1058"><g class="vf-note" pointer-events="bounding-box"><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M241.60955999999993 55M241.60955999999993 56.6848C241.60955999999993 58.7908,243.35051999999993 60.0544,245.54075999999992 60.0544C249.13499999999993 60.0544,253.54355999999993 56.74096,253.54355999999993 53.3152C253.54355999999993 51.23728,251.91491999999994 49.9456,249.61235999999994 49.9456C245.17571999999993 49.9456,241.60955999999993 53.23096,241.60955999999993 56.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-auto1068"><g class="vf-note" pointer-events="bounding-box"><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M281.2236699999999 80M281.2236699999999 81.6848C281.2236699999999 83.7908,282.9646299999999 85.0544,285.1548699999999 85.0544C288.7491099999999 85.0544,293.15766999999994 81.74096,293.15766999999994 78.3152C293.15766999999994 76.23728,291.5290299999999 74.9456,289.2264699999999 74.9456C284.78982999999994 74.9456,281.2236699999999 78.23096,281.2236699999999 81.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-auto1078"><g class="vf-note" pointer-events="bounding-box"><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M320.8377799999999 90M320.8377799999999 91.6848C320.8377799999999 93.7908,322.57873999999987 95.0544,324.7689799999999 95.0544C328.3632199999999 95.0544,332.7717799999999 91.74096,332.7717799999999 88.3152C332.7717799999999 86.23728,331.1431399999999 84.9456,328.8405799999999 84.9456C324.4039399999999 84.9456,320.8377799999999 88.23096,320.8377799999999 91.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-auto1088"><g class="vf-note" pointer-events="bounding-box"><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M360.4518899999999 75M360.4518899999999 76.6848C360.4518899999999 78.7908,362.19284999999985 80.0544,364.38308999999987 80.0544C367.9773299999999 80.0544,372.3858899999999 76.74096,372.3858899999999 73.3152C372.3858899999999 71.23728,370.7572499999999 69.9456,368.45468999999986 69.9456C364.0180499999999 69.9456,360.4518899999999 73.23096,360.4518899999999 76.6848"></path></g></g><g class="vf-modifiers"></g></g><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M94.33712 130L94.33712 55.653527499999996"></path><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M133.95122999999998 80L133.95122999999998 45.75"></path><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M93.58712 55.091027499999996L93.58712 60.091027499999996L134.20122999999998 50.1875L134.20122999999998 45.1875Z"></path><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M163.13133999999997 92L163.13133999999997 124.25"></path><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M202.74544999999995 77L202.74544999999995 116.327178"></path><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M162.38133999999997 125.15L162.38133999999997 120.15L202.99544999999995 112.22717800000001L202.99544999999995 117.22717800000001Z"></path><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M242.35955999999993 57L242.35955999999993 104.3464725"></path><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M281.9736699999999 82L281.9736699999999 114.25"></path><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M241.60955999999993 104.9089725L241.60955999999993 99.9089725L282.2236699999999 109.8125L282.2236699999999 114.8125Z"></path><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M321.5877799999999 92L321.5877799999999 124.25"></path><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M361.2018899999999 77L361.2018899999999 116.327178"></path><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M320.8377799999999 125.15L320.8377799999999 120.15L361.4518899999999 112.22717800000001L361.4518899999999 117.22717800000001Z"></path></svg></div>';
    const actualTrimmed = el.shadowRoot.innerHTML.replace(/\s/g, '').replace(/id="vf-auto(.*?)"/g, '');
    const expectedTrimmed = expected.replace(/\s/g, '').replace(/id="vf-auto(.*?)"/g, '');

    expect(actualTrimmed).to.equal(expectedTrimmed);
  });
});